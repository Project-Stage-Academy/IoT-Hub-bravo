openapi: 3.0.3

info:
  title: IoT Hub API
  version: "1.4.1"
  description: |
    API for managing devices and their telemetry, with full CRUD support, JWT authentication,
    pagination, schema versioning, and example payloads for testing.

servers:
  - url: http://localhost:8000
    description: Local development server

tags:
  - name: Authentication
    description: Authentication endpoints
  - name: Devices
    description: CRUD operations for devices
  - name: Telemetry
    description: CRUD operations for telemetry

paths:
  /api/auth/login:
    post:
      tags:
        - Authentication
      operationId: authLogin
      summary: Obtain JWT access token
      description: |
        Authenticates a user and returns a JWT access token.
        The token must be used in the `Authorization` header for all protected endpoints.
      security: []
      requestBody:
        required: true
        description: User credentials
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthLoginRequest'
            examples:
              valid_credentials:
                summary: Valid user credentials
                value:
                  username: testuser
                  password: testpassword
              admin_credentials:
                summary: Valid admin credentials
                value:
                  username: adminuser
                  password: adminpassword
      responses:
        '200':
          description: JWT token issued successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
              examples:
                success:
                  summary: Access token response
                  value:
                    access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    token_type: bearer
                    expires_in: "2026-01-22T17:00:00Z"
        '400':
          description: Invalid JSON or invalid request payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_json:
                  summary: Invalid JSON
                  value:
                    code: 400
                    message: "Malformed JSON payload."
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_credentials:
                  summary: Username or password is incorrect
                  value:
                    code: 401
                    message: "Invalid username or password."
        '422':
          description: Validation error (missing or invalid fields)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                missing_password:
                  summary: Password is missing
                  value:
                    code: 422
                    message: "password: This field is required."

  /api/auth/refresh:
    post:
      tags:
        - Authentication
      summary: Refresh access token
      description: |
        Exchanges a valid refresh token for a new access token.
      operationId: refreshToken
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRefreshRequest'
            examples:
              valid_refresh:
                summary: Valid refresh token
                value:
                  refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              empty_refresh:
                summary: Empty refresh token (invalid)
                value:
                  refresh_token: ""
      responses:
        '200':
          description: Access token refreshed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
              examples:
                success:
                  value:
                    access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    token_type: bearer
                    expires_in: "2026-04-28T16:15:01Z"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_refresh:
                  value:
                    detail: "Invalid refresh token."
        '401':
          description: Unauthorized (refresh token expired or revoked)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                expired:
                  value:
                    detail: "Token is expired."

        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                validation_error:
                  value:
                    detail: "refresh_token is required."

  /api/devices:
    get:
      tags:
        - Devices
      operationId: listDevices
      summary: List devices with pagination
      description: Retrieve a paginated list of devices in the system.
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 5
          description: Maximum number of devices to return
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: Number of items to skip
      responses:
        '200':
          description: List of devices
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedDevices'
              examples:
                sample:
                  value:
                    total: 2
                    limit: 5
                    offset: 0
                    items:
                      - id: 1
                        serial_id: "ABC12345"
                        name: "Smoke detector"
                        description: "A device that monitors smoke levels"
                        user_id: 1
                        is_active: true
                        created_at: "2026-01-22T12:00:00Z"
                      - id: 2
                        serial_id: "QWE12345"
                        name: "Humidity meter"
                        description: "A device that monitors humidity levels"
                        user_id: 1
                        is_active: false
                        created_at: "2026-01-22T14:32:54Z"
        '404':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    code: 404
                    message: "Devices not found"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                unauthorized:
                  value:
                    code: 401
                    message: "Unauthorized"
    post:
      tags:
        - Devices
      operationId: createDevice
      summary: Create a new device
      description: Create a new device with the provided data. The device must include required fields and schema version.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VersionedDeviceCreate'
            examples:
              new_device:
                value:
                  schema_version: "v1"
                  device:
                    serial_id: "DEF12345"
                    name: "Digital thermometer"
                    description: "Monitors indoor temperature"
                    user_id: 1
                    is_active: false
      responses:
        '201':
          description: Device created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
              examples:
                created:
                  value:
                    id: 3
                    serial_id: "DEF12345"
                    name: "Digital thermometer"
                    description: "Monitors indoor temperature"
                    user_id: 1
                    is_active: false
                    created_at: "2026-02-09T16:00:00Z"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                bad_request:
                  value:
                    code: 400
                    message: "Invalid device data"

  /api/devices/{id}:
    get:
      tags:
        - Devices
      operationId: getDeviceById
      summary: Get device by id
      description: Returns a single device by its unique identifier.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Device found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
              examples:
                example_device:
                  value:
                    id: 1
                    serial_id: "ABC12345"
                    name: "Smoke detector"
                    description: "Monitors CO2 levels."
                    user_id: 1
                    is_active: true
                    created_at: "2026-01-22T12:00:00Z"
        '404':
          description: Device not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    code: 404
                    message: "Device not found."
    put:
      tags:
        - Devices
      operationId: replaceDevice
      summary: Replace device
      description: Fully replaces an existing device with the provided payload.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VersionedDeviceCreate'
            examples:
              replace_example:
                value:
                  schema_version: "v1"
                  device:
                    serial_id: "DEF12345"
                    name: "Digital thermometer"
                    description: "Monitors indoor temperature."
                    user_id: 1
                    is_active: false
      responses:
        '200':
          description: Device updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
              examples:
                updated_device:
                  value:
                    id: 1
                    serial_id: "DEF12345"
                    name: "Digital thermometer"
                    description: "Monitors indoor temperature."
                    user_id: 1
                    is_active: false
                    created_at: "2026-01-22T12:00:00Z"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_request:
                  value:
                    code: 400
                    message: "Invalid device payload."
        '404':
          description: Device not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    code: 404
                    message: "Device not found."
    patch:
      tags:
        - Devices
      summary: Partially update device
      description: Update one or more fields of an existing device.
      operationId: patchDevice
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VersionedDevicePatch'
            examples:
              patch_example:
                value:
                  schema_version: "v1"
                  device:
                    name: "Updated smoke detector"
                    is_active: true
      responses:
        '200':
          description: Device updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
              examples:
                patched_device:
                  value:
                    id: 1
                    serial_id: "ABC12345"
                    name: "Updated smoke detector"
                    description: "Monitors CO2 levels."
                    user_id: 1
                    is_active: true
                    created_at: "2026-01-22T12:00:00Z"
        '400':
          description: Invalid patch
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_patch:
                  value:
                    code: 400
                    message: "Invalid fields for patch."
        '404':
          description: Device not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    code: 404
                    message: "Device not found."
    delete:
      tags:
        - Devices
      summary: Delete device
      description: Deletes a device by its ID.
      operationId: deleteDevice
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '204':
          description: Device deleted successfully
        '404':
          description: Device not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    code: 404
                    message: "Device not found."

  # /api/telemetry:
  #   get:
  #     tags:
  #       - Telemetry
  #     summary: List telemetry records by device_id with pagination
  #     description: Returns a paginated list of telemetry records for a given device.
  #     operationId: listTelemetry
  #     security:
  #       - BearerAuth: []
  #     parameters:
  #       - name: device_id
  #         in: query
  #         required: true
  #         schema:
  #           type: integer
  #           example: 1
  #       - name: limit
  #         in: query
  #         schema:
  #           type: integer
  #           minimum: 1
  #           maximum: 100
  #           default: 5
  #       - name: offset
  #         in: query
  #         schema:
  #           type: integer
  #           minimum: 0
  #           default: 0
  #     responses:
  #       '200':
  #         description: List of telemetry records
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/PaginatedTelemetry'
  #             examples:
  #               example_page:
  #                 value:
  #                   total: 2
  #                   limit: 5
  #                   offset: 0
  #                   items:
  #                     - id: 1
  #                       device_id: 1
  #                       value: 23.5
  #                       timestamp: "2026-02-09T12:00:00Z"
  #                     - id: 2
  #                       device_id: 1
  #                       value: 24.0
  #                       timestamp: "2026-02-09T12:05:00Z"
  #       '404':
  #         description: Invalid request
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/ErrorResponse'
  #             examples:
  #               not_found:
  #                 value:
  #                   code: 404
  #                   message: "No telemetry records found."
  #   post:
  #     tags:
  #       - Telemetry
  #     summary: Create telemetry record
  #     description: Adds a new telemetry record for a device.
  #     operationId: createTelemetry
  #     security:
  #       - BearerAuth: []
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/VersionedTelemetryCreate'
  #           examples:
  #             valid_telemetry:
  #               value:
  #                 schema_version: "v1"
  #                 telemetry:
  #                   device_id: 1
  #                   value: 23.5
  #     responses:
  #       '201':
  #         description: Telemetry created
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/Telemetry'
  #             examples:
  #               created_telemetry:
  #                 value:
  #                   id: 1
  #                   device_id: 1
  #                   value: 23.5
  #                   timestamp: "2026-02-09T12:00:00Z"
  #       '400':
  #         description: Invalid request
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/ErrorResponse'
  #             examples:
  #               invalid_request:
  #                 value:
  #                   code: 400
  #                   message: "Invalid telemetry payload."

  # /api/telemetry/{id}:
  #   get:
  #     tags:
  #       - Telemetry
  #     summary: Get telemetry by id
  #     description: Returns a telemetry record by its unique ID.
  #     operationId: getTelemetryById
  #     security:
  #       - BearerAuth: []
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         schema:
  #           type: integer
  #           example: 1
  #     responses:
  #       '200':
  #         description: Telemetry found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/Telemetry'
  #             examples:
  #               example_telemetry:
  #                 value:
  #                   id: 1
  #                   device_id: 1
  #                   value: 23.5
  #                   timestamp: "2026-02-09T12:00:00Z"
  #       '404':
  #         description: Telemetry not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/ErrorResponse'
  #             examples:
  #               not_found:
  #                 value:
  #                   code: 404
  #                   message: "Telemetry record not found."
  #   # put:
  #   #   tags:
  #   #     - Telemetry
  #   #   summary: Replace telemetry
  #   #   description: Fully replaces an existing telemetry record.
  #   #   operationId: replaceTelemetry
  #   #   security:
  #   #     - BearerAuth: []
  #   #   parameters:
  #   #     - name: id
  #   #       in: path
  #   #       required: true
  #   #       schema:
  #   #         type: integer
  #   #         example: 1
  #   #   requestBody:
  #   #     required: true
  #   #     content:
  #   #       application/json:
  #   #         schema:
  #   #           $ref: '#/components/schemas/VersionedTelemetryCreate'
  #   #         examples:
  #   #           replace_telemetry:
  #   #             value:
  #   #               schema_version: "v1"
  #   #               telemetry:
  #   #                 device_id: 1
  #   #                 value: 24.0
  #   #   responses:
  #   #     '200':
  #   #       description: Telemetry updated
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/Telemetry'
  #   #     '400':
  #   #       description: Invalid request
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/ErrorResponse'
  #   #     '404':
  #   #       description: Telemetry not found
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/ErrorResponse'
  #   # patch:
  #   #   tags:
  #   #     - Telemetry
  #   #   summary: Partially update telemetry
  #   #   operationId: patchTelemetry
  #   #   security:
  #   #     - BearerAuth: []
  #   #   parameters:
  #   #     - name: id
  #   #       in: path
  #   #       required: true
  #   #       schema:
  #   #         type: integer
  #   #   requestBody:
  #   #     required: true
  #   #     content:
  #   #       application/json:
  #   #         schema:
  #   #           $ref: '#/components/schemas/VersionedTelemetryPatch'
  #   #   responses:
  #   #     '200':
  #   #       description: Telemetry updated
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/Telemetry'
  #   #     '400':
  #   #       description: Invalid patch
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/ErrorResponse'
  #   #     '404':
  #   #       description: Telemetry not found
  #   #       content:
  #   #         application/json:
  #   #           schema:
  #   #             $ref: '#/components/schemas/ErrorResponse'
  #   delete:
  #     tags:
  #       - Telemetry
  #     summary: Delete telemetry
  #     description: Deletes a telemetry record by ID.
  #     operationId: deleteTelemetry
  #     security:
  #       - BearerAuth: []
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         schema:
  #           type: integer
  #           example: 1 
  #     responses:
  #       '204':
  #         description: Telemetry deleted successfully
  #       '404':
  #         description: Telemetry not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/ErrorResponse'
  #             examples:
  #               not_found:
  #                 value:
  #                   code: 404
  #                   message: "Telemetry record not found."

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT token containing claims:
        - sub: authenticated user id
        - scope: granted permissions (e.g., devices:read)
        - role: user | admin
        - exp: expiration timestamp

  schemas:
    Device:
      type: object
      properties:
        id:
          type: integer
          example: 1
        serial_id:
          type: string
          example: "ABC12345"
        name:
          type: string
          example: "Smoke detector."
        description:
          type: string
          example: "A device that monitors smoke (CO2) levels in a building."
        user_id:
          type: integer
          example: 1
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
          example: "2026-01-22T12:00:00Z"
      required:
        - id
        - serial_id
        - name
        - user_id
        - is_active
        - created_at
      example:
        id: 1
        serial_id: "ABC12345"
        name: "Smoke detector."
        description: "A device that monitors smoke (CO2) levels in a building."
        user_id: 1
        is_active: true
        created_at: "2026-01-22T12:00:00Z"

    DeviceCreate:
      type: object
      properties:
        serial_id:
          type: string
          example: "DEF12345"
        name:
          type: string
          example: "Digital thermometer."
        description:
          type: string
          example: "Monitors indoor temperature."
        user_id:
          type: integer
          example: 1
        is_active:
          type: boolean
          example: false
      required:
        - serial_id
        - name
        - user_id
        - is_active
      example:
        serial_id: "ABC12345"
        name: "Digital thermometer."
        description: "Monitors indoor temperature."
        user_id: 1
        is_active: false

    DevicePatch:
      type: object
      properties:
        serial_id:
          type: string
          example: "ABC12345"
        name:
          type: string
          example: "Smoke detector."
        description:
          type: string
          example: "New description."
        user_id:
          type: integer
          example: 1
        is_active:
          type: boolean
          example: true
      example:
        serial_id: "ABC12345"
        name: "Smoke detector."
        description: "New description."
        user_id: 1
        is_active: true

    VersionedDeviceCreate:
      type: object
      properties:
        schema_version:
          type: string
          example: "v1"
        device:
          $ref: '#/components/schemas/DeviceCreate'
      required:
        - schema_version
        - device
      example:
        schema_version: "v1"
        device:
          serial_id: "DEF12345"
          name: "Digital thermometer."
          description: "Monitors indoor temperature."
          user_id: 1
          is_active: false

    VersionedDevicePatch:
      type: object
      properties:
        schema_version:
          type: string
          example: "v1"
        device:
          $ref: '#/components/schemas/DevicePatch'
      required:
        - schema_version
        - device
      example:
        schema_version: "v1"
        device:
          name: "Updated smoke detector name."
          description: "Updated description."
          is_active: true

    Telemetry:
      type: object
      properties:
        id:
          type: integer
          example: 1
        device_id:
          type: integer
          example: 1
        key:
          type: string
          example: "temperature"
        value:
          type: number
          example: 18.3
        created_at:
          type: string
          format: date-time
          example: "2024-04-13T18:45:37Z"
      required:
        - id
        - device_id
        - key
        - value
        - created_at
      example:
        id: 1
        device_id: 1
        key: "temperature"
        value: 18.3
        created_at: "2024-04-13T18:45:37Z"

    TelemetryCreate:
      type: object
      properties:
        device_id:
          type: integer
          example: 1
        key:
          type: string
          example: "humidity"
        value:
          type: number
          example: 25.43
      required:
        - device_id
        - key
        - value
      example:
        device_id: 1
        key: "humidity"
        value: 25.43

    TelemetryPatch:
      type: object
      properties:
        key:
          type: string
          example: "temperature"
        value:
          type: number
          example: 24.3
      example:
        key: "temperature"
        value: 24.3

    VersionedTelemetryCreate:
      type: object
      properties:
        schema_version:
          type: string
          example: "v1"
        telemetry:
          $ref: '#/components/schemas/TelemetryCreate'
      required:
        - schema_version
        - telemetry
      example:
        schema_version: "v2"
        telemetry:
          device_id: 1
          key: "humidity"
          value: 25.43

    VersionedTelemetryPatch:
      type: object
      properties:
        schema_version:
          type: string
          example: "v1.0"
        telemetry:
          $ref: '#/components/schemas/TelemetryPatch'
      required:
        - schema_version
        - telemetry
      example:
        schema_version: "v1.2"
        telemetry:
          key: "temperature"
          value: 24.3

    AuthLoginRequest:
      type: object
      properties:
        username:
          type: string
          example: testuser
        password:
          type: string
          format: password
          example: testpassword
      required:
        - username
        - password
      example:
        username: testuser
        password: testpassword

    AuthTokenResponse:
      type: object
      properties:
        access_token:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        token_type:
          type: string
          example: bearer
        expires_in:
          type: string
          format: date-time
          example: "2026-01-22T17:00:00Z"
      required:
        - access_token
        - token_type
        - expires_in
      example:
        access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        token_type: bearer
        expires_in: "2026-01-22T17:00:00Z"

    AuthRefreshRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
          description: JWT refresh token
      example:
        refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        
    ErrorResponse:
      type: object
      properties:
        code:
          type: integer
        message:
          type: string
      example:
        code: 404
        message: "Resource not found"

    PaginatedDevices:
      type: object
      properties:
        total:
          type: integer
          example: 12
        limit:
          type: integer
          example: 5
        offset:
          type: integer
          example: 0
        items:
          type: array
          items:
            $ref: '#/components/schemas/Device'
          example:
            [
              {
                id: 1,
                serial_id: "ABC12345",
                name: "Smoke detector.",
                description: "A device that monitors smoke (CO2) levels in a building.",
                user_id: 1,
                is_active: true,
                created_at: "2026-01-22T12:00:00Z"
              },
              {
                id: 2,
                serial_id: "QWE12345",
                name: "Humidity meter.",
                description: "A device that monitors humidity(%) level in a building.",
                user_id: 1,
                is_active: false,
                created_at: "2026-01-22T14:32:54Z"
              }
            ]
      required:
        - total
        - limit
        - offset
        - items
      example:
        total: 12
        limit: 5
        offset: 0
        items:
          - id: 1
            serial_id: "ABC12345"
            name: "Smoke detector."
            description: "A device that monitors smoke (CO2) levels in a building."
            user_id: 1
            is_active: true
            created_at: "2026-01-22T12:00:00Z"
          - id: 2
            serial_id: "QWE12345"
            name: "Humidity meter."
            description: "A device that monitors humidity(%) level in a building."
            user_id: 1
            is_active: false
            created_at: "2026-01-22T14:32:54Z"

    PaginatedTelemetry:
      type: object
      properties:
        total:
          type: integer
          example: 20
        limit:
          type: integer
          example: 5
        offset:
          type: integer
          example: 0
          # Offset = 5 means skip 5 results and display the next 5.
          # example: page 1 (result showed: 1-5), page 2 (result showed : 6-10) , page 3 (result showed: 11-15), and etc.
        items:
          type: array
          items:
            $ref: '#/components/schemas/Telemetry'
          example: 
              [
              {
                id: 1,
                device_id: 1,
                key: "temperature",
                value: 18.3,
                created_at: "2024-04-13T18:45:37Z"
              },
              {
                id: 2,
                device_id: 1,
                key: "humidity",
                value: 6.73,
                created_at: "2022-07-01T11:23:33Z"
              }
            ]
      required:
        - total
        - limit
        - offset
        - items
      example:
        total: 20
        limit: 5
        offset: 0
        items:
          - id: 1
            device_id: 1
            key: "temperature"
            value: 18.3
            created_at: "2024-04-13T18:45:37Z"
          - id: 2
            device_id: 1
            key: "humidity"
            value: 6.73
            created_at: "2022-07-01T11:23:33Z"